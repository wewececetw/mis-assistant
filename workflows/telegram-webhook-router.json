{
  "name": "Telegram Bot",
  "nodes": [
    {
      "parameters": {
        "updates": ["message"]
      },
      "id": "tg-trigger",
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.1,
      "position": [240, 400],
      "webhookId": "tg-webhook",
      "credentials": {
        "telegramApi": {
          "id": "XfuqkzOYYEa0ar0n",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const msg = $input.first().json.message;\nif (!msg || !msg.text) return [];\nconst text = msg.text.trim();\nif (!text.startsWith('/')) return [];\nconst cmd = text.substring(1).split(/[@\\s]/)[0].toLowerCase();\nconst chatId = msg.chat.id;\n\nlet message = '';\nswitch(cmd) {\n  case 'start':\n    message = 'ğŸ¤– æ­¡è¿ä½¿ç”¨ MIS åŠ©ç†ï¼\\n\\nğŸ“‹ å¯ç”¨æŒ‡ä»¤ï¼š\\n/status - ç³»çµ±ç‹€æ…‹ç›£æ§\\n/backup - è³‡æ–™åº«å‚™ä»½\\n/news - æ¯æ—¥ç§‘æŠ€æ–°è\\n/meeting - AI æœƒè­°è¨˜éŒ„\\n/help - é¡¯ç¤ºæ­¤å¹«åŠ©\\n\\nğŸ’¡ æç¤ºï¼šç›´æ¥ç™¼é€æŒ‡ä»¤å³å¯ä½¿ç”¨';\n    break;\n  case 'status':\n    message = 'âœ… [ç³»çµ±ç‹€æ…‹]\\n\\nğŸ¤– MIS åŠ©ç†ï¼šé‹è¡Œä¸­\\nğŸ“¦ n8nï¼šæ­£å¸¸é‹è¡Œ\\nâ° æ™‚é–“ï¼š' + new Date().toLocaleString('zh-TW') + '\\n\\nğŸ’¡ è©³ç´°ç›£æ§è«‹æŸ¥çœ‹ n8n UI';\n    break;\n  case 'backup':\n    message = 'ğŸ’¾ [å‚™ä»½]\\n\\nâœ… è³‡æ–™åº«å‚™ä»½ä»»å‹™å·²è§¸ç™¼\\nâ³ é è¨ˆå®Œæˆæ™‚é–“ï¼š2-5 åˆ†é˜\\n\\nå‚™ä»½å°‡ä¿å­˜è‡³ï¼š\\nC:\\\\mis-assistant\\\\backups';\n    break;\n  case 'news':\n    message = 'ğŸ“° [ç§‘æŠ€æ–°è]\\n\\nâ³ æ­£åœ¨ç²å–æœ€æ–°ç§‘æŠ€æ–°è...\\n\\nğŸ“¡ ä¾†æºï¼šHacker News, TechCrunch\\nğŸ”„ æ›´æ–°ä¸­ï¼Œè«‹ç¨å€™';\n    break;\n  case 'meeting':\n    message = 'ğŸ“ [æœƒè­°è¨˜éŒ„]\\n\\nğŸ’¡ ä½¿ç”¨èªªæ˜ï¼š\\n\\n1ï¸âƒ£ ä¸Šå‚³æœƒè­°è¨˜éŒ„æ–‡ä»¶ï¼ˆ.txt, .mdï¼‰\\n2ï¸âƒ£ æˆ–ç™¼é€æœƒè­°èªéŸ³æª”æ¡ˆ\\n3ï¸âƒ£ AI å°‡è‡ªå‹•ç”Ÿæˆæ‘˜è¦\\n\\nâœ¨ åŠŸèƒ½é–‹ç™¼ä¸­ï¼Œå³å°‡ä¸Šç·š';\n    break;\n  case 'help':\n    message = 'â“ [å¹«åŠ©]\\n\\nğŸ¤– MIS è‡ªå‹•åŒ–åŠ©ç†\\n\\nğŸ“‹ å¯ç”¨æŒ‡ä»¤ï¼š\\n\\n/start - é–‹å§‹ä½¿ç”¨\\né¡¯ç¤ºæ­¡è¿è¨Šæ¯å’ŒæŒ‡ä»¤åˆ—è¡¨\\n\\n/status - ç³»çµ±ç‹€æ…‹\\næŸ¥çœ‹ç³»çµ±é‹è¡Œç‹€æ…‹å’Œæ™‚é–“\\n\\n/backup - è³‡æ–™åº«å‚™ä»½\\nç«‹å³è§¸ç™¼è³‡æ–™åº«å‚™ä»½ä»»å‹™\\n\\n/news - ç§‘æŠ€æ–°è\\nç²å–ç•¶æ—¥ç§‘æŠ€æ–°èæ‘˜è¦\\n\\n/meeting - æœƒè­°è¨˜éŒ„\\nä¸Šå‚³æ–‡ä»¶ç”Ÿæˆ AI æ‘˜è¦\\n\\n/help - é¡¯ç¤ºæ­¤å¹«åŠ©\\næŸ¥çœ‹æ‰€æœ‰å¯ç”¨æŒ‡ä»¤èªªæ˜\\n\\nğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š\\nâ€¢ ç›´æ¥ç™¼é€æŒ‡ä»¤å³å¯\\nâ€¢ æ”¯æŒç¾¤çµ„ä½¿ç”¨\\nâ€¢ 24/7 éš¨æ™‚å¯ç”¨\\n\\nâš™ï¸ ç³»çµ±ç‰ˆæœ¬ï¼šv1.0.0\\nğŸ”— n8n UIï¼šhttps://nucboxg3-plus.tail2f559.ts.net';\n    break;\n  default:\n    message = 'âŒ æœªçŸ¥æŒ‡ä»¤\\n\\nè«‹è¼¸å…¥ /help æŸ¥çœ‹å¯ç”¨æŒ‡ä»¤';\n}\n\nreturn [{json: {message: message, chatId: chatId}}];"
      },
      "id": "router",
      "name": "Router",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 400]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.message }}"
      },
      "id": "send",
      "name": "Send",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [680, 400],
      "credentials": {
        "telegramApi": {
          "id": "XfuqkzOYYEa0ar0n",
          "name": "Telegram Bot"
        }
      }
    }
  ],
  "connections": {
    "Telegram Trigger": {"main": [[{"node": "Router", "type": "main", "index": 0}]]},
    "Router": {"main": [[{"node": "Send", "type": "main", "index": 0}]]}
  },
  "active": true,
  "settings": {"executionOrder": "v1"},
  "id": "telegram-webhook-router"
}
